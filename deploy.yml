- name: Deploy Personal Website
  hosts: nycgeek.social
  become: yes
  tasks:
    - name: Ensure the destination directory exists
      file:
        path: /var/www/html/
        state: directory
        owner: www-data
        group: www-data
        mode: '0755'

    - name: Deploy website files
      synchronize:
        src: ./my_website/
        dest: /var/www/html/
        rsync_opts:
          - "--chown=www-data:www-data"
      delegate_to: localhost
